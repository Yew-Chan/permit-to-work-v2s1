<header>
    <p>
        <mat-toolbar class = "applicant-toolbar">
            <mat-toolbar-row>
                <mat-icon style = "color: rgb(25, 25, 25)">dashboard</mat-icon><span id = "toolbar-title">&emsp;DASHBOARD</span>
                <span class = "spacer"></span>
                <div id = "signed-in-as" *ngIf = "this.userNameDisplay != ''">
                    <span id = "signed-in-as-label"><mat-label style = "font-weight: 525">{{ this.userNameDisplay }}<mat-icon style = "vertical-align: middle">person</mat-icon></mat-label></span>
                </div>
                <div id = "sign-in-as" *ngIf = "this.userNameDisplay == ''">
                    <span id = "signed-in-as-label"><mat-label>...</mat-label></span>
                </div>
                <button mat-icon-button class = "toolbar-menu-button" [matMenuTriggerFor] = "applicantMenu" aria-label = "Applicant toolbar menu">
                    <mat-icon>menu</mat-icon>
                </button>
                <mat-menu #applicantMenu = "matMenu">
                    <button mat-menu-item (click) = "this.navigateTo('validator-tl')">
                        <mat-icon>book</mat-icon>
                        <span>Tracking Log</span>
                    </button>
                    <button mat-menu-item (click) = "this.openSignOutDialog()">
                        <mat-icon>exit_to_app</mat-icon>
                        <span>Sign Out</span>
                    </button>
                </mat-menu>
            </mat-toolbar-row>
        </mat-toolbar>
    </p>
</header>
<div class = "content-body">
    <div id = "left-content-container">
        <mat-card>
            <div id = "left-content">
                <mat-card-header>
                    <mat-card-title>Permits Overview</mat-card-title>
                    <mat-card-subtitle>All recent permit statuses at a glance</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content id = "permit-status-statistics-content">
                    <mat-list class = "permit-status-statistics">
                        <mat-list-item><mat-label style = "font-weight: 425;">REQUEST PENDING</mat-label></mat-list-item>
                        <mat-list-item id = "pss-item" style = "background-color: royalblue;">
                            <mat-label id = "label-text">{{ this.processingPermitNo }}&emsp;</mat-label>
                            <mat-label style = "font-size: 16px"><mat-icon style = "vertical-align: middle; font-size: 22px;">autorenew</mat-icon>&emsp;Processing</mat-label>
                        </mat-list-item>
                        <mat-list-item><mat-label style = "font-weight: 425;">PROCESSED REQUEST</mat-label></mat-list-item>
                        <mat-list-item id = "pss-item" style = "background-color: forestgreen;">
                            <mat-label id = "label-text">{{ this.validPermitNo }}&emsp;</mat-label>
                            <mat-label style = "font-size: 16px"><mat-icon style = "vertical-align: middle; font-size: 22px;">done_outline</mat-icon>&emsp;Valid&emsp;(Approved)</mat-label>
                        </mat-list-item>
                        <mat-list-item id = "pss-item" style = "background-color: rgb(25, 25, 25);">
                            <mat-label id = "label-text">{{ this.invalidPermitNo }}&emsp;</mat-label>
                            <mat-label style = "font-size: 16px"><mat-icon style = "vertical-align: middle; font-size: 22px;">report_problem</mat-icon>&emsp;Invalid&emsp;(Rejected/Cancelled)</mat-label>
                        </mat-list-item>
                        <mat-list-item><mat-label style = "font-weight: 425;">POST-APPROVAL</mat-label></mat-list-item>
                        <mat-list-item id = "pss-item" style = "background-color: rgb(103, 58, 183);">
                            <mat-label id = "label-text">{{ this.closedPermitNo }}&emsp;</mat-label>
                            <mat-label style = "font-size: 16px"><mat-icon style = "vertical-align: middle; font-size: 22px;">block</mat-icon>&emsp;Closed</mat-label>
                        </mat-list-item>
                        <mat-list-item id = "pss-item" style = "background-color: firebrick;">
                            <mat-label id = "label-text">{{ this.terminatedPermitNo }}&emsp;</mat-label>
                            <mat-label style = "font-size: 16px"><mat-icon style = "vertical-align: middle; font-size: 22px;">clear</mat-icon>&emsp;Terminated</mat-label>
                        </mat-list-item>
                        <mat-list-item id = "pss-item" style = "background-color: goldenrod;">
                            <mat-label id = "label-text">{{ this.expiredPermitNo }}&emsp;</mat-label>
                            <mat-label style = "font-size: 16px"><mat-icon style = "vertical-align: middle; font-size: 22px;">not_interested</mat-icon>&emsp;Expired</mat-label>
                        </mat-list-item>
                    </mat-list>
                </mat-card-content>
                <mat-card-actions align = "end" style = "margin-right: 10px;">
                    <button 
                        mat-stroked-button
                        appearance = "accent" 
                        (click) = "this.navigateTo('validator-tl')">SEE FULL LOG</button>
                </mat-card-actions>
            </div>
        </mat-card>
    </div>
    <div id = "right-content-container">
        <mat-card>
            <div id = "right-content">
                <mat-card-header>
                    <mat-card-title>Pending Requests ({{ this.pendingReqList.length }})</mat-card-title>
                    <mat-card-subtitle>Select one to view and process</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content id = "pending-reqs-content">
                    <div *ngIf = "this.pendingReqList.length === 0" id = "no-data-container">
                        <mat-label>No pending requests at the moment</mat-label>
                        <br><br>
                        <mat-icon>report_problem</mat-icon>
                    </div>
                    <mat-list class = "pending-reqs-list" *ngFor = "let pending of this.pendingReqList">
                        <br><br><br><br><br>
                        <mat-list-item>
                            <div id = "pending-req-item">
                                <mat-card>
                                    <mat-card-header>
                                            <mat-card-title>
                                                <mat-label style = "font-size:medium; font-weight: 425;">
                                                    {{ pending.ptwId }}
                                                </mat-label>
                                            </mat-card-title>
                                            <mat-card-subtitle>
                                                <mat-icon *ngIf = "pending.permitType == 'Hot work permit (HWP)'" style = "color: brown">whatshot</mat-icon>
                                                <mat-icon *ngIf = "pending.permitType == 'Cold work permit (CWP)'" style = "color: darkslateblue">ac_unit</mat-icon>
                                                <mat-icon *ngIf = "pending.permitType == 'Electrical permit (EP)'" style = "color: khaki">flash_on</mat-icon>
                                                <mat-icon *ngIf = "pending.permitType == 'Work at height permit (WAHP)'" style = "color: darkslategrey">location_city</mat-icon>
                                                <mat-icon *ngIf = "pending.permitType == 'Confined space permit (CSP)'" style = "color: forestgreen">zoom_out_map</mat-icon>
                                                {{ pending.permitType }}
                                            </mat-card-subtitle>
                                    </mat-card-header>
                                    <mat-card-content>
                                        <mat-label style = "font-weight: 425;">&emsp;{{ pending.locationOfWork.main }}&emsp;⯁&emsp;{{ pending.locationOfWork.sub }}</mat-label>
                                        <br>
                                        <mat-label style = "font-weight: 425;">&emsp;Effective period:</mat-label>
                                        <mat-label>&emsp;{{ pending.startWorkingDateTime | date: "medium" }} - {{ pending.endWorkingDateTime | date: "medium" }}</mat-label>
                                        <br><br>
                                        <mat-label style = "font-weight: 425;">&emsp;Task:</mat-label>
                                        <mat-label>&emsp;{{ pending.taskDescription }}&emsp;❖&emsp;<mat-label style = "font-weight: 425;">Applied by:</mat-label>&emsp;{{ pending.applicantDets.name }} on <u>{{ pending.timestamp | date: "mediumDate" }}</u></mat-label>
                                    </mat-card-content>
                                    <mat-card-actions align = "end">
                                        <div *ngIf = "pending.safetyAssessorEvaluation?.passed || !pending.safetyAssessorEvaluation?.passed">
                                            <div *ngIf = "pending.safetyAssessorEvaluation?.name != 'None' && pending.safetyAssessorEvaluation?.passed">
                                                <mat-icon style = "color: darkgreen; vertical-align: middle;">done_all</mat-icon><mat-label style = "color: darkgreen; font-weight: 450; font-size: 14px;">EVAL PASSED&emsp;<mat-label>{{ pending.safetyAssessorEvaluation?.timestamp | date: "short" }}&emsp;</mat-label></mat-label>
                                            </div>
                                            <div *ngIf = "pending.safetyAssessorEvaluation?.name != 'None' && !pending.safetyAssessorEvaluation?.passed">
                                                <mat-icon style = "color: maroon; vertical-align: middle;">clear</mat-icon><mat-label style = "color: maroon; font-weight: 450; font-size: 14px;">EVAL NOT PASSED&emsp;<mat-label>{{ pending.safetyAssessorEvaluation?.timestamp | date: "short" }}&emsp;</mat-label></mat-label>
                                            </div>
                                            <div *ngIf = "pending.safetyAssessorEvaluation?.name == 'None' && !pending.safetyAssessorEvaluation?.passed">
                                                <mat-icon style = "color: grey; vertical-align: middle;">priority_high</mat-icon><mat-label style = "color: grey; font-weight: 450; font-size: 14px;">NOT YET EVALUATED&emsp;</mat-label>
                                            </div>
                                        </div>
                                        <div *ngIf = "pending.authorisedManagerApproval?.passed || !pending.authorisedManagerApproval?.passed">
                                            <div *ngIf = "pending.authorisedManagerApproval?.name != 'None' && pending.authorisedManagerApproval?.passed">
                                                <mat-icon style = "color: darkgreen; vertical-align: middle;">done_all</mat-icon><mat-label style = "color: darkgreen; font-weight: 450; font-size: 14px;">APPROVED&emsp;<mat-label>{{ pending.authorisedManagerApproval?.timestamp | date: "short" }}&emsp;</mat-label></mat-label>
                                            </div>
                                            <div *ngIf = "pending.authorisedManagerApproval?.name != 'None' && !pending.authorisedManagerApproval?.passed">
                                                <mat-icon style = "color: maroon; vertical-align: middle;">clear</mat-icon><mat-label style = "color: maroon; font-weight: 450; font-size: 14px;">REJECTED&emsp;<mat-label>{{ pending.authorisedManagerApproval?.timestamp | date: "short" }}&emsp;</mat-label></mat-label>
                                            </div>
                                            <div *ngIf = "pending.authorisedManagerApproval?.name == 'None' && !pending.authorisedManagerApproval?.passed">
                                                <mat-icon style = "color: grey; vertical-align: middle;">priority_high</mat-icon><mat-label style = "color: grey; font-weight: 450; font-size: 14px;">NOT YET APPROVED/REJECTED&emsp;</mat-label>
                                            </div>
                                        </div>
                                        <div style = "margin-right: 15px;">
                                            <button 
                                            mat-stroked-button
                                            appearance = "accent"
                                            (click) = "this.expandSelectedPtw(pending.id.toString())">VIEW & PROCESS</button>
                                        </div>
                                    </mat-card-actions>
                                </mat-card>
                            </div>
                        </mat-list-item>
                        <br><br><br><br><br>
                    </mat-list>
                </mat-card-content>
            </div>
        </mat-card>
    </div>
</div>